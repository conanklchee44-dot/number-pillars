* {
    /* initialize custom values */
    --default-bgcolor: #2e86c1;
    --default-bghover: #138d75;
    --default-menucolor: #10161c;
    --default-transparent: rgba(0, 0, 0, 0.2);
    --default-shadow: rgba(0, 0, 0, 0.4);
    --default-font: "Nanum Pen Script", sans-serif;
    --button-font: "Sigmar One";
    --yellow: #ffd166;

    margin: 0;
    padding: 0;
    font-family: var(--default-font);
    box-sizing: border-box;
}

h1 {
    font-family: "Walter Turncoat", sans-serif;
    text-align: left;
    font-size: 3rem;
    color: #ffffff;
    margin-bottom: 20px;
    text-shadow: 0 2px 6px var(--default-shadow);
    margin-left: -20px;
}

p {
    text-align: center;
    font-size: 1.7rem;
    color: #ffffff;
}

h3 {
    margin-top: 20px;
    font-size: 1.5rem;
    color: #ffffff;
    font-family: var(--default-font);
}

div.instructions-container {
    background-color: var(--default-transparent);
    border-radius: 8px;
    padding: 5px;
    width: 70%;
    margin: 10;
    margin-bottom: 50px;
    margin-left: -20px;
}

div.info-container {
    background-color: var(--default-transparent);
    width: 255px;
    padding: 1px 2px 15px 20px;
    border-radius: 8px;
    margin-bottom: -120px;
    margin-left: -20px;
}

div.run-container {
    background-color: var(--default-transparent);
    width: 200px;
    padding: 1px 2px 15px 20px;
    border-radius: 8px;
    margin-left: 360px;
    margin-top: -200px;
}

div.difficulty-container {
    background-color: var(--default-transparent);
    width: 360px;
    padding: 1px 2px 15px 20px;
    border-radius: 8px;
    margin-left: 200px;
    margin-top: 24px;
    position: relative;
    z-index: 50;
}

div.editor-container {
    background-color: var(--default-transparent);
    width: 200px;
    height: 125px;
    padding: 1px 2px 15px 20px;
    border-radius: 8px;
    margin-left: -20px;
    margin-top: -125px;
    position: relative;
    z-index: 50;
}

div.stack-container {
    background-color: var(--default-transparent);
    width: 200px;
    height: 510px;
    padding: 1px 2px 15px 20px;
    border-radius: 8px;
    margin-left: 600px;
    margin-top: -512px;
}

div.footer {
    margin-top: 40px;
    text-align: center;
    font-size: 1rem;
    color: #ffffff;
    font-family: var(--default-font);
}
#targetNum,
#answerSum,
#lives,
#xp,
#levelIndex {
    color: var(--yellow);
    font-family: var(--default-font);
}

#settingsBtn {
    font-family: var(--button-font);
    margin-top: 30px;
    margin-left: 8px;
    padding: 8px 20px;
    font-size: 22px;
    color: #ffffff;
    background-color: var(--default-bgcolor);
    transition-duration: 0.2s;
    border: none;
    border-radius: 5px;
    cursor: pointer;
}
#settingsBtn:hover {
    background-color: var(--default-bghover);
    transform: scale(1.2);
}

#resetBtn {
    font-family: var(--button-font);
    margin-top: 30px;
    padding: 8px 20px;
    font-size: 26px;
    color: #ffffff;
    background-color: var(--default-bgcolor);
    transition-duration: 0.2s;
    border: none;
    border-radius: 5px;
    cursor: pointer;
}

#resetStatsBtn {
    font-family: var(--button-font);
    margin-top: -40px;
    margin-left: -420px;
    padding: 8px 20px;
    font-size: 14px;
    color: #ffffff;
    background-color: #ff6a6a;
    transition-duration: 0.2s;
    border: none;
    border-radius: 5px;
    cursor: pointer;
}


#soundToggle {
    font-family: var(--button-font);
    margin-top: 12px;
    margin-left: 8px;
    padding: 6px 12px;
    font-size: 20px;
    color: #ffffff;
    background-color: var(--default-bgcolor);
    border: none;
    border-radius: 5px;
    cursor: pointer;
    z-index: 40;
}

#hintBtn {
    font-family: var(--default-font);
    margin-top: 20px;
    font-size: 1.5rem;
    font-weight: bold;
    color: var(--yellow);
    background-color: #00000000 ;
    transition-duration: 0.2s;
    position: relative; 
    border: none;
    cursor: pointer;
    z-index: 60;
}

/* tooltips */
[data-tooltip] { position: relative; }
[data-tooltip]::after {
    content: attr(data-tooltip);
    position: absolute;
    bottom: calc(100% + 10px);
    left: 50%;
    transform: translateX(-50%);
    background: rgba(0,0,0,0.95);
    color: var(--yellow);
    font-family: var(--default-font);
    font-size: 1.5rem;
    font-weight: bold;
    padding: 6px 10px;
    border-radius: 6px;
    white-space: nowrap;
    font-size: 1rem;
    box-shadow: 0 6px 18px var(--default-shadow);
    z-index: 20000;
    opacity: 0;
    pointer-events: none;
    transition: opacity 200ms ease, transform 200ms cubic-bezier(.2,.8,.2,1);
}
[data-tooltip]:hover::after,
[data-tooltip]:focus::after {
    opacity: 1;
    transform: translateX(-50%) translateY(-4px);
    z-index: 200000;
}
[data-tooltip]::before {
    content: '';
    position: absolute;
    bottom: calc(100% + 4px);
    left: 50%;
    transform: translateX(-50%);
    width: 0; height: 0;
    border-left: 6px solid transparent;
    border-right: 6px solid transparent;
    border-top: 6px solid rgba(0,0,0,0.95);
    z-index: 20000;
    opacity: 0;
    transition: opacity 200ms ease;
}
[data-tooltip]:hover::before,
[data-tooltip]:focus::before { opacity: 1; }

#editorToggle {
    font-family: var(--button-font);
    padding: 8px 20px;
    color: #ffffff;
    font-size: 18px;
    background-color: var(--default-bgcolor);
    transition-duration: 0.2s;
    margin-left: -6px;
    margin-top: 20px;
    border: none;
    border-radius: 5px;
    cursor: pointer;
}

#statsClose {
    margin-top: 12px;
    font-family: var(--button-font);
    padding: 8px 24px;
    font-size: 1.1rem;
    border-radius: 8px;
    border: none;
    background: var(--default-bgcolor);
    color: #ffffff;
    cursor: pointer;
    transition: background 0.2s;
}

.hint {
    box-shadow: 0 0 18px 4px rgba(255, 209, 102) !important;
    outline: 2px solid rgba(255, 209, 102);
    transform: scale(1.06);
}

#easyBtn, #mediumBtn, #hardBtn {
    font-family: var(--button-font);
    margin-top: 20px;
    padding: 8px 20px;
    font-size: 18px;
    color: #ffffff;
    background-color: var(--default-bgcolor);
    transition-duration: 0.2s;
    border: none;
    border-radius: 5px;
    cursor: pointer;
}

#statsBtn {
    position: absolute;
    left: 260px;
    top: 180px;
    writing-mode: vertical-rl;
    text-orientation: mixed;
    font-family: var(--button-font);
    font-size: 32px;
    background: var(--default-bgcolor);
    color: #ffffff;
    border: none;
    border-radius: 8px;
    padding: 16px 8px;
    cursor: pointer;
    box-shadow: 0 2px 8px #0004;
    z-index: 10;
    margin-top: 40px;
    transition-duration: 0.2s;
    transform-style: ease;
}


#easyBtn:hover, #mediumBtn:hover, #hardBtn:hover, 
#resetBtn:hover, #soundToggle:hover, #editorToggle:hover, 
#statsClose:hover, #statsBtn:hover {
    background-color: var(--default-bghover);
    transform: scale(1.05);
}

#hintBtn:hover {
    color: #ffffff;
    scale: 1.05;
}

#stack {
    list-style-type: none;
    display: flex;
    flex-direction: column-reverse;
    position: absolute;
    bottom: 150px;
    left: 360px;
    z-index: 10;
}

#stack li {
    font-family: var(--default-font);
    width: 80px;
    height: 50px;
    display: flex;
    justify-content: center;
    align-items: center;
    cursor: pointer;
    background-color: var(--default-bgcolor);
    color: #ffffff;
    margin-bottom: 4px;
    margin-left: 300px;
    box-shadow: 0 1px 2px var(--default-shadow);
    font-size: 1.6rem;
    transition-duration: 0.2s;
    font-weight: 700;
}

#stack li:hover {
    background-color: var(--default-bghover);
    transform: scale(1.1);
    box-shadow: none;
}

/* animated background blobs */

.animated-bg{
    position:fixed;
    inset:0;
    z-index:-1;
    overflow:hidden;
    pointer-events:none;
    background: linear-gradient(135deg,#071025 0%, #071428 60%, #071a2f 100%);
}
.blob{
    position:absolute;
    width:60vmax;
    height:60vmax;
    border-radius:50%;
    filter:blur(120px) saturate(120%);
    mix-blend-mode:screen;
    opacity:0.7;
    transform:translate3d(0,0,0);
    will-change:transform, filter;
    animation: float 6s ease-in-out infinite;
}
.b1{ 
    left:-10%; 
    top:-20%; 
    background:radial-gradient(circle at 30% 30%, rgba(255,95,167,0.45), rgba(255,95,167,0.18) 35%, transparent 60%); 
    animation-duration:22s; 
}
.b2{ 
    right:-15%; 
    top:10%; 
    background:radial-gradient(circle at 70% 70%, rgba(45,150,255,0.36), rgba(45,150,255,0.12) 40%, transparent 65%);
    animation-duration:26s;
}
.b3{
    left:15%; 
    bottom:-25%; 
    background:radial-gradient(circle at 50% 50%, rgba(120,255,180,0.32), rgba(120,255,180,0.09) 35%, transparent 60%);
    animation-duration:20s;
}

@keyframes float{
    0%{ transform: translate3d(0,0,0) scale(1); }
    25%{ transform: translate3d(8vw,-6vh,0) scale(1.05); }
    50%{ transform: translate3d(0,10vh,0) scale(0.98); }
    75%{ transform: translate3d(-6vw,-4vh,0) scale(1.03); }
    100%{ transform: translate3d(0,0,0) scale(1); }
}
.drop-out {
    animation: drop 700ms cubic-bezier(.2,.8,.2,1) forwards;
    will-change: transform, opacity;
}

@keyframes drop {
    0% {
        transform: translateY(0) rotate(0deg) scale(1);
        opacity: 1;
    }
    20% {
        opacity: 0.3;
    }
    60% {
        transform: translateY(25vh) rotate(12deg) scale(0.96);
        opacity: 0;
    }
    100% {
        transform: translateY(300vh) rotate(45deg) scale(0.6);
        opacity: 0;
    }
}

#bg > * {
    transition: opacity 220ms ease;
}
.dimmed {
    opacity: 0.1;
    pointer-events: none;
}
.placeholder {
    background: transparent;
    overflow: hidden;
    transition: height 480ms cubic-bezier(.2,.8,.2,1), margin-bottom 480ms cubic-bezier(.2,.8,.2,1);
}
.placeholder.collapse {
    height: 0 !important;
    margin-bottom: 0 !important;
}

.floating-clone {
    pointer-events: none;
    display: flex;
    justify-content: center;
    align-items: center;
    font-family: inherit;
    font-size: inherit;
    color: inherit;
    background-color: var(--default-bgcolor);
    box-shadow: 0 1px 2px var(--default-shadow);
    border-radius: 4px;
}

.floating-clone {
    z-index: 10000;
    will-change: transform, opacity;
    backface-visibility: hidden;
    transform: translateZ(0);
    transform-origin: center center;
}

.drop-out {
    animation: drop 700ms cubic-bezier(.2,.8,.2,1) forwards;
    will-change: transform, opacity;
}

/* level editor styles */

.hidden { display: none !important; } /* Only use when fully hidden, not during animation */
.level-editor {
    background: var(--default-menucolor);
    padding: 16px 24px;
    border-radius: 8px;
    color: #fff;
    width: 720px;
    max-width: calc(100% - 40px);
    position: fixed;
    left: 50%;
    top: 50%;
    transform: translate(-50%, 120%);
    opacity: 0;
    transition: transform 320ms cubic-bezier(.2,.8,.2,1), opacity 240ms ease;
    z-index: 10001;
    box-shadow: 0 10px 30px rgba(0,0,0,0.6);
}
.level-editor.open {
    transform: translate(-50%, -50%);
    opacity: 1;
}
.level-editor .editor-row {
    display: flex;
    gap: 8px;
    align-items: center;
    margin-bottom: 8px;
    z-index: 70;
}
.level-editor label {
    width: 200px; 
    font-family: var(--button-font);
    color: var(--yellow);
    z-index: 70;
    font-size: 2rem;
    margin-bottom: 12px;
}
.level-editor input {
    flex: 1;
    font-size: 1.4rem;
    padding: 6px 8px;
    border-radius: 4px;
    border: 1px solid rgba(255,255,255,0.12);
    background: rgba(255,255,255,0.03);
    color: #ffffff;
    z-index: 70;
}
.level-editor button {
     font-family: var(--button-font);
     padding: 8px 16px;
     font-size: 1rem;
     color: #ffffff;
     background-color: var(--default-bgcolor);
     transition-duration: 0.2s;
     border: none;
     border-radius: 5px;
     cursor: pointer;
     z-index: 70;
     margin-left: 8px;
}
.level-editor button:hover {
    background-color: #138d75;
    transform: scale(1.05);
}

.level-editor h2 {
    font-family: "Walter Turncoat", sans-serif;
    text-align: left;
    font-size: 2.5rem;
    color: #ffffff;
    margin-bottom: 20px;
    text-shadow: 0 2px 6px var(--default-shadow);
    margin-left: 20px;
}

.level-editor h4 {
    font-family: var(--default-font);
    font-size: 1.5rem;
}
.custom-list {
     list-style: none; 
     max-height: 160px;
     padding: 0; 
     margin: 0;
}
.custom-list li { 
    padding: 6px; 
    margin-bottom: 6px; 
    background: rgba(255,255,255,0.03); 
    display:flex; 
    gap:8px; 
    align-items:center; 
    justify-content:space-between; 
    border-radius: 5px;
    font-size: 1.2rem;
    width: 680px;
}
.level-editor .editor-actions { margin: 8px 0; }
.custom-list li button { margin-left: 6px; }

.dimmed {
    opacity: 0.1;
    transition: opacity 180ms ease;
    pointer-events: none;
}

.hidden { display: none; }
body.modal-open { overflow: hidden; }
body.modal-close{ overflow: hidden; }

/* settings container styles */
.settings-container {
    background: var(--default-menucolor);
    border-radius: 16px;
    box-shadow: 0 4px 24px var(--default-shadow);
    padding: 32px 24px 24px 24px;
    position: fixed;
    top: 50%;
    left: 50%;
    transform: translate(-50%, 120%);
    opacity: 0;
    z-index: 100001;
    color: var(--yellow);
    font-size: 1.3rem;
    transition: transform 320ms cubic-bezier(.2,.8,.2,1), opacity 240ms ease;
    will-change: transform, opacity;
    pointer-events: none;
}

.settings-container.open {
    transform: translate(-50%, -50%);
    opacity: 1;
    pointer-events: auto;
}


.settings-container h2 {
    font-family: "Walter Turncoat", sans-serif;
    text-align: center;
    font-size: 2.8rem;
    color: #ffffff;
    margin-bottom: 24px;
    text-shadow: 0 2px 6px var(--default-shadow);
}

.settings-row {
    display: flex;
    align-items: center;
    margin-bottom: 18px;
    gap: 12px;
}
.settings-row label {
    flex: 1;
    font-size: 2rem;
    font-family: var(--default-font);
    font-weight: bold;
    color: #fff;
}
.settings-row button {
    font-size: 1.5rem;
    padding: 8px 18px;
    border-radius: 8px;
    border: none;
    background: var(--default-menucolor);
    color: var(--yellow);
    cursor: pointer;
    transition: background 0.2s;
}
.settings-row button[aria-pressed="true"] {
    background: var(--yellow);
    color: var(--default-menucolor);
}
.settings-container .settings-row:last-child {
    margin-bottom: 0;
}

.settings-container button {
    font-family: var(--button-font);
    padding: 8px 20px;
    font-size: 18px;
    margin-top: 12px;
    color: #ffffff;
    background-color: var(--default-bgcolor);
    transition-duration: 0.2s;
    border: none;
    border-radius: 5px;
    cursor: pointer;
}

.settings-container button:hover {
    background-color: #138d75;
    transform: scale(1.05);
}
/* popups*/
.popup.large {
    font-size: 3.2rem;
    padding: 32px 64px;
    border-radius: 24px;
    background: rgba(0,0,0,0.98);
    box-shadow: 0 12px 48px var(--default-shadow);
}


/* popup styles */
.popup {
    position: fixed;
    top: 32px;
    left: 50%;
    transform: translateX(-50%) translateY(-60px);
    background: var(--default-shadow);
    color: var(--yellow);
    font-family: var(--default-font);
    font-size: 2rem;
    font-weight: bold;
    padding: 18px 48px;
    border-radius: 12px;
    box-shadow: 0 6px 24px var(--default-shadow);
    opacity: 0;
    z-index: 99999;
    pointer-events: none;
    transition: opacity 0.3s cubic-bezier(.2,.8,.2,1), transform 0.4s cubic-bezier(.2,.8,.2,1);
}
.popup.show {
    opacity: 1;
    transform: translateX(-50%) translateY(0);
    pointer-events: auto;
}
.shake {
    animation: shake 0.5s cubic-bezier(.36,.07,.19,.97) both;
}
@keyframes shake {
    10%, 90% { transform: translateX(-50%) translateY(0) translateX(-2px); }
    20%, 80% { transform: translateX(-50%) translateY(0) translateX(4px); }
    30%, 50%, 70% { transform: translateX(-50%) translateY(0) translateX(-8px); }
    40%, 60% { transform: translateX(-50%) translateY(0) translateX(8px); }
    100% { transform: translateX(-50%) translateY(0); }
}
#confetti-canvas {
    position: fixed;
    top: 0; left: 0; width: 100vw; height: 100vh;
    pointer-events: none;
    z-index: 100000;
}

#easyBtn.difficulty-selected, #mediumBtn.difficulty-selected, #hardBtn.difficulty-selected {
    background-color: #ffd166;
    color: #10161c;
    cursor: not-allowed;
    pointer-events: none;
    box-shadow: 0 0 0 2px #ffd16644;
}

/* Stats/Achievements Modal Styles */
.modal-container {
    background: var(--default-menucolor);
    border-radius: 16px;
    box-shadow: 0 4px 24px var(--default-shadow);
    padding: 0;
    position: fixed;
    top: 50%;
    left: 50%;
    transform: translate(-50%, 120%);
    opacity: 0;
    z-index: 100002;
    min-width: 340px;
    max-width: 90vw;
    color: var(--yellow);
    font-size: 1.3rem;
    transition: transform 320ms cubic-bezier(.2,.8,.2,1), opacity 240ms ease;
    pointer-events: none;
    width: 600px;
    display: flex;
    flex-direction: column;
    align-items: center;
}
.modal-container.open {
    transform: translate(-50%, -50%);
    opacity: 1;
    pointer-events: auto;
}
.modal-content {
    width: 100%;
    padding: 32px 24px 24px 24px;
    display: flex;
    flex-direction: column;
    align-items: center;
}
.modal-content h2 {
    font-family: "Walter Turncoat", sans-serif;
    text-align: center;
    font-size: 2.4rem;
    color: #ffffff;
    margin-bottom: 18px;
}
.modal-tabs {
    display: flex;
    gap: 12px;
    margin-bottom: 18px;
}
.modal-tab {
    font-family: var(--button-font);
    font-size: 1.1rem;
    padding: 8px 24px;
    border-radius: 8px 8px 0 0;
    border: none;
    background: #222a33;
    color: #ffffff;
    cursor: pointer;
    transition: background 0.2s;
}
.modal-tab.active {
    background: var(--default-bgcolor);
    font-weight: bold;
}
.modal-panel {
    width: 100%;
    min-height: 120px;
    margin-bottom: 18px;
}
.modal-panel ul {
    list-style: none;
    padding: 0;
    margin: 0;
}
.modal-panel li {
    font-size: 1.2rem;
    margin-bottom: 10px;
    color: #ffffff;
    background: rgba(255,255,255,0.03);
    border-radius: 6px;
    padding: 8px 12px;
    display: flex;
    align-items: center;
    gap: 8px;
}

